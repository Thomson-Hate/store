<!DOCTYPE html>
<html lang="ru">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>HATE STORE</title>
<style>
* { margin:0; padding:0; box-sizing:border-box; }
body { font-family:-apple-system,BlinkMacSystemFont,"SF Pro Display",sans-serif; background:#111; color:#fff; min-height:100vh; overflow-x:hidden; display:flex; flex-direction:column; }
a { color:inherit; text-decoration:none; }
.bg-letters { position: fixed; inset:0; z-index:-1; overflow:hidden; opacity:0.05; pointer-events:none; }
.bg-letters span { position:absolute; font-size:4rem; font-weight:900; color:#fff; animation:float linear infinite; }
@keyframes float { 0% { transform: translateY(110vh) rotate(0deg); opacity:0; } 30% { opacity:0.25; } 100% { transform: translateY(-20vh) rotate(360deg); opacity:0; } }
.top-bar{ position:fixed; top:14px;left:50%; transform:translateX(-50%); width:95%;max-width:1200px;height:75px; border-radius:24px; padding:0 26px; display:flex;align-items:center;justify-content:space-between; backdrop-filter:blur(18px) saturate(180%); background:rgba(255,255,255,0.06); border:1px solid rgba(255,255,255,0.25); box-shadow:0 8px 35px rgba(0,0,0,0.35); z-index:1000; transition:.4s; }
.top-bar.scrolled{ height:65px; background:rgba(255,255,255,0.04); }
.top-bar b{ font-size:1.4rem; font-weight:700; }
.toggle{ width:270px;height:38px; background:rgba(255,255,255,0.08); border-radius:25px; display:flex;position:relative; backdrop-filter:blur(14px) saturate(180%); border:1px solid rgba(255,255,255,0.25); overflow:hidden; }
.toggle button{ flex:1;border:none;background:none;color:#fff; font-size:.9rem;font-weight:500;cursor:pointer; z-index:2;transition:.3s; }
.toggle button.active{ font-weight:600; text-shadow:0 0 6px rgba(255,255,255,0.85); }
.slider{ position:absolute;top:0;left:0; width:33.333%;height:100%; border-radius:25px; backdrop-filter:blur(28px) saturate(320%); background:rgba(255,255,255,0.25); border:1px solid rgba(255,255,255,0.42); box-shadow: inset 0 0 15px rgba(255,255,255,.35),0 0 25px rgba(255,255,255,.55); animation: glassGlow 3.5s ease-in-out infinite; transition:left .55s cubic-bezier(.18,.8,.35,1.25); overflow:hidden; }
.slider::before{ content:"";position:absolute; inset:0; border-radius:inherit; background:linear-gradient(135deg, rgba(255,255,255,0.65) 0%, rgba(255,255,255,0.18) 40%, rgba(255,255,255,0.08) 75%, rgba(255,255,255,0) 100%); filter:blur(1.2px); animation: shineMove 6s ease-in-out infinite; opacity:.58; pointer-events:none; }
@keyframes glassGlow{ 0% { box-shadow:0 0 8px rgba(255,255,255,0.10), inset 0 0 6px rgba(255,255,255,0.07); } 50%{ box-shadow:0 0 22px rgba(255,255,255,0.35), inset 0 0 10px rgba(255,255,255,0.18);} 100% { box-shadow:0 0 8px rgba(255,255,255,0.10), inset 0 0 6px rgba(255,255,255,0.07); } }
@keyframes shineMove{ 0%{ transform:translateX(-60%) rotate(0deg); } 50%{ transform:translateX(40%) rotate(10deg); } 100%{ transform:translateX(-60%) rotate(0deg); } }
.container{ width:92%;max-width:1100px; margin:120px auto 50px; padding:40px; border-radius:30px; background:rgba(255,255,255,0.05); backdrop-filter:blur(25px) saturate(180%); border:1px solid rgba(255,255,255,0.12); animation:fadeInUp .7s ease both; }
@keyframes fadeInUp{ from{opacity:0;transform:translateY(25px);} to{opacity:1;transform:none;} }
.search{ width:100%; padding:14px; border-radius:16px; background:rgba(255,255,255,.08); border:1px solid rgba(255,255,255,.12); color:#fff; margin-bottom:20px; }
.categories{display:flex;gap:12px;margin-bottom:20px;flex-wrap:wrap}
.cat{ padding:8px 16px;border-radius:14px; background:rgba(255,255,255,.08);cursor:pointer;transition:.3s; }
.cat:hover,.cat.active{ background:rgba(255,255,255,.28); box-shadow:0 0 22px rgba(255,255,255,.35); }
.products{ display:grid; grid-template-columns:repeat(auto-fill,minmax(230px,1fr)); gap:20px; max-height: none; overflow: visible; }
.product{ position: relative; padding:15px; border-radius:22px; background:rgba(0,0,0,.55); border:1px solid rgba(255,255,255,.12); cursor:pointer; transition:.35s; z-index:1; }
.product:hover{ transform:translateY(-6px) scale(1.03); box-shadow:0 0 40px rgba(255,255,255,.35), inset 0 0 20px rgba(255,255,255,.08); z-index:10; }
.product img{ width:100%; border-radius:16px; }
.old{ opacity:.5;text-decoration:line-through;font-size:.9rem; }
.sale{ color:#ff4d4d;font-weight:600; }
.modal{ position:fixed;inset:0; background:rgba(0,0,0,.75); display:none; align-items:center;justify-content:center;}
.modal.show{display:flex;}
.modal-card{ width:430px;padding:25px; border-radius:26px; background:rgba(0,0,0,.88); backdrop-filter:blur(35px); border:1px solid rgba(255,255,255,.12); animation:fadeInUp .45s ease; }
.colors{display:flex;gap:10px;margin:15px 0;}
.color{ width:26px;height:26px;border-radius:50%; border:2px solid #fff;cursor:pointer;transition:.3s; }
.color:hover{transform:scale(1.15)}
.color.active{box-shadow:0 0 25px #fff,0 0 40px rgba(255,255,255,.35);}
.gallery{display:flex;gap:8px;margin-top:10px;}
.gallery img{width:55px;height:55px;object-fit:cover;border-radius:10px;cursor:pointer;opacity:.6;transition:.3s;}
.gallery img:hover{opacity:1;transform:scale(1.05)}
.gallery img.active{opacity:1;border:2px solid #fff;}
.buy{margin-top:15px;padding:12px;border-radius:14px;background:rgba(255,255,255,.22);text-align:center;cursor:pointer;transition:.3s;}
.buy:hover{box-shadow:0 0 30px rgba(255,255,255,.35);}
footer{ margin-top:auto; padding:28px 0; background:rgba(255,255,255,0.05); backdrop-filter:blur(18px); border-top:1px solid rgba(255,255,255,0.18); text-align:center; }
.maintenance { display:flex; flex-direction:column; align-items:center; justify-content:center; min-height:100vh; text-align:center; }
.maintenance h1 { font-size:2rem; margin:10px 0; }
.maintenance p { font-size:1.1rem; opacity:0.8; }
</style>
</head>
<body>

<div class="bg-letters">
    <span style="left:10%; animation-duration:14s;">H</span>
    <span style="left:35%; animation-duration:18s;">A</span>
    <span style="left:60%; animation-duration:16s;">T</span>
    <span style="left:85%; animation-duration:20s;">E</span>
</div>

<div id="app"></div>

<script>
// ===== –ó–ê–ì–†–£–ó–ö–ê JSON –° –û–ë–•–û–î–û–ú –ö–ï–®–ê =====
async function loadStore() {
    try {
        const res = await fetch('store.json?t=' + Date.now());
        const STORE = await res.json();
        initStore(STORE);
    } catch (err) {
        console.error("–ù–µ —É–¥–∞–ª–æ—Å—å –∑–∞–≥—Ä—É–∑–∏—Ç—å store.json", err);
        document.getElementById("app").innerHTML = `<div class="maintenance">
            <div style="font-size:3rem;">‚ö†Ô∏è</div>
            <h1>–û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ –¥–∞–Ω–Ω—ã—Ö</h1>
            <p>–ü–æ–ø—Ä–æ–±—É–π—Ç–µ –ø–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∏—Ç—å —Å—Ç—Ä–∞–Ω–∏—Ü—É.</p>
        </div>`;
    }
}

function initStore(STORE) {
    const app = document.getElementById("app");

    // ===== –¢–ï–•–ù–ò–ß–ï–°–ö–ò–ï –†–ê–ë–û–¢–´ =====
    if (STORE.maintenance) {
        app.innerHTML = `
            <div class="maintenance">
                <div style="font-size:3rem;">üöß</div>
                <h1>–í–µ–¥—É—Ç—Å—è —Ç–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ —Ä–∞–±–æ—Ç—ã</h1>
                <p>–°–∫–æ—Ä–æ –º—ã –≤–µ—Ä–Ω–µ–º—Å—è! –°–ª–µ–¥–∏—Ç–µ –∑–∞ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è–º–∏ –≤ –Ω–∞—à–µ–º <a href="${STORE.telegram}" target="_blank" style="color:#fff;text-decoration:underline;">Telegram</a>.</p>
            </div>
        `;
        return;
    }

    // ===== TOP BAR –ò –°–¢–†–ê–ù–ò–¶–´ =====
    app.innerHTML = `
        <div class="top-bar">
            <b>HATE STORE</b>
            <div class="toggle">
                <div class="slider" id="slider"></div>
                <button class="active" data-tab="shop">–ú–∞–≥–∞–∑–∏–Ω</button>
                <button data-tab="about">–û –Ω–∞—Å</button>
                <button data-tab="contacts">–ö–æ–Ω—Ç–∞–∫—Ç—ã</button>
            </div>
        </div>
        <div class="container" id="shop">
            <input class="search" id="search" placeholder="–ü–æ–∏—Å–∫ —Ç–æ–≤–∞—Ä–∞...">
            <div class="categories" id="categories"></div>
            <div class="categories" id="subCategories"></div>
            <div class="products" id="products"></div>
        </div>
        <div class="container" id="about" hidden>–û –Ω–∞—Å</div>
        <div class="container" id="contacts" hidden>Telegram</div>
        <div class="modal" id="modal">
            <div class="modal-card">
                <img id="modalImg" style="width:100%;border-radius:18px">
                <div class="gallery" id="gallery"></div>
                <h2 id="modalName"></h2>
                <p id="modalDesc"></p>
                <div class="colors" id="modalColors"></div>
                <div id="modalPrice"></div>
                <div class="buy" id="buyBtn">–ö—É–ø–∏—Ç—å</div>
            </div>
        </div>
        <footer>¬© 2025 ‚Ä¢ HATE STORE</footer>
    `;

    // ===== TABS =====
    const slider = document.getElementById("slider");
    document.querySelectorAll(".toggle button").forEach((b, i) => {
        b.onclick = () => {
            document.querySelectorAll(".toggle button").forEach(x => x.classList.remove("active"));
            b.classList.add("active");
            slider.style.left = i * 33.333 + "%";
            ["shop", "about", "contacts"].forEach(id => document.getElementById(id).hidden = true);
            document.getElementById(b.dataset.tab).hidden = false;
        }
    });

    const search = document.getElementById("search");

    // ===== CATEGORIES =====
    let currentCategory = STORE.categories[0]?.id;
    let currentSub = STORE.categories[0]?.sub?.[0]?.id || null;

    function renderCategories() {
        const catCont = document.getElementById("categories");
        catCont.innerHTML = "";
        STORE.categories.forEach(c => {
            const el = document.createElement("div");
            el.className = "cat" + (c.id === currentCategory ? " active" : "");
            el.textContent = c.name;
            el.onclick = () => {
                currentCategory = c.id;
                currentSub = c.sub?.[0]?.id || null;
                renderCategories();
                renderSubCategories(c);
                renderProducts();
            };
            catCont.appendChild(el);
        });
    }

    function renderSubCategories(cat) {
        const subCont = document.getElementById("subCategories");
        subCont.innerHTML = "";
        if (!cat.sub || !cat.sub.length) return;
        cat.sub.forEach(s => {
            const el = document.createElement("div");
            el.className = "cat" + (s.id === currentSub ? " active" : "");
            el.textContent = s.name;
            el.onclick = () => {
                currentSub = s.id;
                renderSubCategories(cat);
                renderProducts();
            };
            subCont.appendChild(el);
        });
    }

    function renderProducts() {
        const productsEl = document.getElementById("products");
        productsEl.innerHTML = "";
        STORE.products
            .filter(p => p.categories.includes(currentCategory))
            .filter(p => !currentSub || p.categories.includes(currentSub))
            .filter(p => p.name.toLowerCase().includes(search.value.toLowerCase()))
            .forEach(p => {
                const final = p.discount ? p.price * (1 - p.discount / 100) : p.price;
                const d = document.createElement("div");
                d.className = "product";
                d.innerHTML = `<img src="${p.colors[0].images[0]}"><h3>${p.name}</h3>${p.discount ? `<div class="old">${p.price}‚ÇΩ</div><div class="sale">${final}‚ÇΩ</div>` : `<div>${p.price}‚ÇΩ</div>`}`;
                d.onclick = () => openModal(p);
                productsEl.appendChild(d);
            });
    }

    search.oninput = renderProducts;

    renderCategories();
    renderSubCategories(STORE.categories[0]);
    renderProducts();

    // ===== MODAL =====
    function openModal(p) {
        const modal = document.getElementById("modal");
        modal.classList.add("show");
        document.getElementById("modalName").textContent = p.name;
        document.getElementById("modalDesc").textContent = p.desc;
        document.getElementById("modalColors").innerHTML = "";
        const gallery = document.getElementById("gallery");
        gallery.innerHTML = "";
        const final = p.discount ? p.price * (1 - p.discount / 100) : p.price;
        document.getElementById("modalPrice").innerHTML = p.discount ? `<span class="old">${p.price}‚ÇΩ</span> <span class="sale">${final}‚ÇΩ</span>` : `${p.price}‚ÇΩ`;

        setColor(p.colors[0]);
        p.colors.forEach((c, i) => {
            const col = document.createElement("div");
            col.className = "color" + (i == 0 ? " active" : "");
            col.style.background = c.hex;
            col.onclick = () => {
                document.querySelectorAll(".color").forEach(x => x.classList.remove("active"));
                col.classList.add("active");
                setColor(c);
            };
            document.getElementById("modalColors").appendChild(col);
        });

        document.getElementById("buyBtn").onclick = () => window.open(STORE.telegram, "_blank");

        function setColor(c) {
            document.getElementById("modalImg").src = c.images[0];
            gallery.innerHTML = "";
            c.images.forEach((img, i) => {
                const im = document.createElement("img");
                im.src = img;
                if (i == 0) im.classList.add("active");
                im.onclick = () => {
                    document.querySelectorAll(".gallery img").forEach(x => x.classList.remove("active"));
                    im.classList.add("active");
                    document.getElementById("modalImg").src = img;
                };
                gallery.appendChild(im);
            });
        }

        modal.onclick = e => { if (e.target === modal) modal.classList.remove("show"); };
    }
}

loadStore();
</script>

</body>
</html>
